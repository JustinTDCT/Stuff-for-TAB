#!/bin/bash
echo "Removing scripts and downloading fresh copies ..."
rm /home/tabadmin/SetupVeeamM.sh
rm /home/tabadmin/SetIP.sh
rm /home/tabadmin/loginscript.sh
wget -O /home/tabadmin/SetupVeeamM.sh https://raw.githubusercontent.com/JustinTDCT/Stuff-for-TAB/main/SetupVeeamVM
wget -O /home/tabadmin/SetIP.sh https://raw.githubusercontent.com/JustinTDCT/Stuff-for-TAB/main/setip
wget -O /home/tabadmin/loginscript.sh https://raw.githubusercontent.com/JustinTDCT/Stuff-for-TAB/main/loginscript
chmod +x /home/tabadmin/SetupVeeamM.sh
chmod +x /home/tabadmin/SetIP.sh
chmod +xX /home/tabadmin/loginscript.sh
if [ -f /home/tabadmin/statenew.txt ]; then
    echo "First time being run, setup the IP ..."
    read -t5
    sudo /home/tabadmin/./SetIP.sh
    exit
fi
if [ -f /home/tabadmin/stateipset.txt ]; then
    echo "Looks like the IP was already set - gonna start the Veeam setup script ..."
    read -t5
    sudo /home/tabadmin/./SetupVeeamVM.sh
    exit
fi
if [ -f /home/tabadmin/stateveeamdone.txt ]; then
    echo "Veeam should be already setup, exiting ..."
    exit
fi
